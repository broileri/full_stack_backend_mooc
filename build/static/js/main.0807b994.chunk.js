(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),s=n(2),u=n(4),i=n.n(u),l="/api/persons",m=function(){return i.a.get(l)},f=function(e){return i.a.post(l,e)},d=function(e,t){return i.a.put("".concat(l,"/").concat(e),t)},p=function(e){return i.a.delete("".concat(l,"/").concat(e))},b=(n(39),function(e){var t=e.filterValue,n=e.setState;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))}),h=n(16),v=function(e){var t=e.persons,n=e.setPersons,a=e.newName,o=e.setNewName,c=e.newNumber,s=e.setNewNumber,u=e.setNotification,i=function(e){f(e).then((function(e){u({type:"success",message:'Person "'.concat(e.data.name,'" was added successfully!')}),n(t.concat(e.data)),o(""),s("")})).catch((function(e){u({type:"error",message:e.response.data.error})}))},l=function(e,a,r){d(e,a).then((function(e){u({type:"success",message:'The number of "'.concat(a.name,'" was updated successfully!')});var c=Object(h.a)(t);c[r].number=e.data.number,n(c),o(""),s("")})).catch((function(e){u({type:"error",message:e.response.data.error})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:a,number:c},r=t.findIndex((function(e){return e.name===n.name}));if(r<0)i(n);else if(t[r].number!==n.number){if(window.confirm('"'.concat(n.name,'" is already added to phonebook, replace the old number with the new one?'))){var o=t[r].id;l(o,n,r)}}else u({type:"error",message:'Person "'.concat(n.name,'" is already added to phonebook!')})}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:function(e){return s(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},E=function(e){var t=e.person,n=e.persons,a=e.setPersons,o=e.setNotification,c=function(e){p(e.id).then((function(t){o({type:"success",message:'Person "'.concat(e.name,'" was removed from phonebook!')}),a(n.filter((function(t){return e.id!==t.id})))})).catch((function(t){console.log(t),o({type:"error",message:'Could not remove person "'.concat(e.name,'"!')})}))};return r.a.createElement("div",{key:t.name},t.name,"\xa0",t.number,"\xa0",r.a.createElement("button",{onClick:function(){return function(e){window.confirm('Delete "'.concat(e.name,'"?'))&&c(e)}(t)}},"Delete"))},w=function(e){var t=e.persons,n=e.setPersons,a=e.nameFilter,o=e.setNotification;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return e.name.toLowerCase().indexOf(a.toLowerCase())>=0?r.a.createElement(E,{key:e.name,person:e,setPersons:n,persons:t,setNotification:o}):null})))},N=function(e){var t=e.notification,n=e.setNotification;if(!t||null===t.message)return null;var a=t.type?t.type:"warning";return setTimeout((function(){n(null)}),6e3),r.a.createElement("div",{className:"message ".concat(a)},t.message)},g=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),i=u[0],l=u[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),p=d[0],h=d[1],E=Object(a.useState)(""),g=Object(s.a)(E,2),y=g[0],O=g[1],j=Object(a.useState)(null),P=Object(s.a)(j,2),k=P[0],S=P[1];return Object(a.useEffect)((function(){m().then((function(e){o(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(N,{notification:k,setNotification:S}),r.a.createElement(b,{filterValue:y,setState:O}),r.a.createElement("h2",null,"Add New"),r.a.createElement(v,{persons:n,setPersons:o,newName:i,setNewName:l,newNumber:p,setNewNumber:h,setNotification:S}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:n,setPersons:o,nameFilter:y,setNotification:S}))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0807b994.chunk.js.map