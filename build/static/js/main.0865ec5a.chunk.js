(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),c=n.n(r),u=n(2),s=n(4),i=n.n(s),l="/api/persons",m=function(){return i.a.get(l)},f=function(e){return i.a.post(l,e)},d=function(e,t){return i.a.put("".concat(l,"/").concat(e),t)},p=function(e){return i.a.delete("".concat(l,"/").concat(e))},b=(n(39),function(e){var t=e.filterValue,n=e.setState;return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))}),h=n(16),v=function(e){var t=e.persons,n=e.setPersons,a=e.newName,r=e.setNewName,c=e.newNumber,u=e.setNewNumber,s=e.setNotification;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var o={name:a,number:c},i=t.findIndex((function(e){return e.name===o.name}));i<0?f(o).then((function(e){s({type:"success",message:'Person "'.concat(e.data.name,'" was added successfully!')}),n(t.concat(e.data)),r(""),u("")})).catch((function(e){s({type:"error",message:'Could not add person "'.concat(o.name,'" to phonebook!')})})):t[i].number!==o.number?window.confirm('"'.concat(o.name,'" is already added to phonebook, replace the old number with the new one?'))&&d(t[i].id,o).then((function(e){var a=Object(h.a)(t);s({type:"success",message:'The number of "'.concat(o.name,'" was updated successfully!')}),a[i].number=e.data.number,n(a),r(""),u("")})).catch((function(e){s({type:"error",message:'Could not update number for person "'.concat(o.name,'"!')})})):s({type:"error",message:'Person "'.concat(o.name,'" is already added to phonebook!')})}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:a,onChange:function(e){return r(e.target.value)}}),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:c,onChange:function(e){return u(e.target.value)}}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},E=function(e){var t=e.person,n=e.persons,a=e.setPersons,r=e.setNotification,c=function(e){p(e.id).then((function(t){r({type:"success",message:'Person "'.concat(e.name,'" was removed from phonebook!')}),a(n.filter((function(t){return e.id!==t.id})))})).catch((function(t){console.log(t),r({type:"error",message:'Could not remove person "'.concat(e.name,'"!')})}))};return o.a.createElement("div",{key:t.name},t.name,"\xa0",t.number,"\xa0",o.a.createElement("button",{onClick:function(){return function(e){window.confirm('Delete "'.concat(e.name,'"?'))&&c(e)}(t)}},"Delete"))},w=function(e){var t=e.persons,n=e.setPersons,a=e.nameFilter,r=e.setNotification;return o.a.createElement(o.a.Fragment,null,t.map((function(e){return e.name.toLowerCase().indexOf(a.toLowerCase())>=0?o.a.createElement(E,{key:e.name,person:e,setPersons:n,persons:t,setNotification:r}):null})))},N=function(e){var t=e.notification,n=e.setNotification;if(!t||null===t.message)return null;var a=t.type?t.type:"warning";return setTimeout((function(){n(null)}),4e3),o.a.createElement("div",{className:"message ".concat(a)},t.message)},g=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],f=Object(a.useState)(""),d=Object(u.a)(f,2),p=d[0],h=d[1],E=Object(a.useState)(""),g=Object(u.a)(E,2),y=g[0],O=g[1],j=Object(a.useState)(null),k=Object(u.a)(j,2),P=k[0],C=k[1];return Object(a.useEffect)((function(){m().then((function(e){r(e.data)}))}),[]),o.a.createElement("div",null,o.a.createElement("h1",null,"Phonebook"),o.a.createElement(N,{notification:P,setNotification:C}),o.a.createElement(b,{filterValue:y,setState:O}),o.a.createElement("h2",null,"Add New"),o.a.createElement(v,{persons:n,setPersons:r,newName:i,setNewName:l,newNumber:p,setNewNumber:h,setNotification:C}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(w,{persons:n,setPersons:r,nameFilter:y,setNotification:C}))};c.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0865ec5a.chunk.js.map